process PROD  = {

	source = HcalTBSource { 
		untracked vstring fileNames = { 'tb04_hf_electron_16322.root' }
		untracked int32 maxEvents = 100
//		untracked int32 hcalFedOffset = 559
                untracked vstring streams = { 'HCAL_DCC020:20','HCAL_Trigger' }
	}

	module unpacker = HcalRawToDigi {
                untracked int32 firstSample = 1
                untracked int32 lastSample = 10
                untracked int32 HcalFirstFED = 2
                untracked vint32 FEDs = { 20 }
		untracked bool FilterDataQuality = true
		untracked bool FilterAmplitude = true
		untracked int32 FilterAmpBegin = 3
		untracked int32 FilterAmpEnd = 6
		untracked double FilterAmpLevel = 20.0
		untracked string readoutMapSource = 'file://../../../CondFormats/HcalMapping/test/hf_tb04.txt'
	}

	module reco = HcalSimpleReconstructor {
	       untracked int32 firstSample = 4
	       untracked int32 samplesToAdd = 3
	       untracked string Subdetector = 'HF'
	}

        module dumper = HcalDigiDump {
        }
        module dumper2 = HcalRecHitDump {
        }

	module out = PoolOutputModule {	
		untracked string fileName = 'Persist.root'
	}


	es_module = HcalDbProducer {untracked string dbSource = "hardcode"}
	

        es_module = HcalDbProducer {untracked string dbSource = "hardcode"}

	es_source es_0 = HcalDbSource {}

	es_source es_1 = EmptyESSource {untracked string recordName = "HcalPedestalsRcd"
                                   untracked bool iovIsRunNotTime = true
				   untracked vuint32 firstValid = {1,2,3}
                                  }
	es_source es_2 = EmptyESSource {untracked string recordName = "HcalPedestalWidthsRcd"
                                   untracked bool iovIsRunNotTime = true
				   untracked vuint32 firstValid = {1,2,3}
                                  }
	es_source es_3 = EmptyESSource {untracked string recordName = "HcalGainsRcd"
                                   untracked bool iovIsRunNotTime = true
				   untracked vuint32 firstValid = {1,2,3}
                                  }
	es_source es_4 = EmptyESSource {untracked string recordName = "HcalGainWidthsRcd"
                                   untracked bool iovIsRunNotTime = true
				   untracked vuint32 firstValid = {1,2,3}
                                  }

	module hcalCalib = EventSetupRecordDataGetter { VPSet toGet = {
	       {string record = "HcalDbRecord" 
                vstring data = { 
                                "HcalDbService"} } } 
	       untracked bool verbose = true 
	}


	path p = { hcalCalib, unpacker, dumper, reco, dumper2, out }


}
