process PROD  = {

	source = HcalTBSource { 
		untracked vstring fileNames = { '/afs/cern.ch/user/m/mansj/cms/HTBqc_001030.root' }
		untracked int32 maxEvents = 200
                untracked vstring streams = { 'HCAL_DCC020:20','HCAL_Trigger' }
	}

	module unpacker = HcalRawToDigi {
                int32 firstSample = 0
                int32 lastSample = 9
                untracked int32 HcalFirstFED = 20
                untracked vint32 FEDs = { 20 }
		bool FilterDataQuality = true
		bool FilterAmplitude = true
		int32 FilterAmpBegin = 4
		int32 FilterAmpEnd = 7
		double FilterAmpLevel = 22.0
	}

	module reco = HcalSimpleReconstructor {
               int32 firstSample = 4  
               int32 samplesToAdd = 4
               bool correctTimeSlew = true
               string Subdetector = 'HBHE'
               string digiLabel = 'unpacker'
	}

        module dumper = HcalDigiDump {
        }
        module dumper2 = HcalRecHitDump {
        }

	module out = PoolOutputModule {	
		untracked string fileName = 'Persist.root'
	}

	es_module = HcalDbProducer {}
        es_source = HcalHardcodeCalibrations {
                vstring toGet = {
                          "Pedestals","PedestalWidths",
                          "Gains", "GainWidths", "QIEShape", "QIEData",
                          "channelQuality"}
        }

        es_source es_ascii = HcalTextCalibrations { VPSet input = {
                                              {string object = "ElectronicsMap"
                                               string file = "CondFormats/HcalMapping/test/satocrich.txt"
                                              }
                }
        }  


	path p = { unpacker, dumper, reco, dumper2, out }
}
